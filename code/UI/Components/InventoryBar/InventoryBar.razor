@using Sandbox;
@using Sandbox.UI;
@inherits Panel
@namespace Scenebox
@attribute [StyleSheet]

<root class="@(IsVisible ? "" : "hidden")">
    @for (int i = 0; i < 9; i++)
    {
        <div class="slot @(((Inventory?.HoveredWeapon?.Resource?.Slot ?? 0) == (i + 1)) ? "active" : "")">
            @if (true)
            {
                var weapons = Inventory.Weapons.Where(x => x.Resource.Slot == i + 1);
                if (weapons.Count() > 0)
                {
                    foreach (var weapon in weapons)
                    {
                        <InventoryBarEntry class="@(Inventory.HoveredWeapon == weapon ? "active" : "")" Slot=@(i + 1) Weapon=@weapon />
                    }
                }
                else
                {
                    <InventoryBarEntry Slot=@(i + 1) />
                }
            }
        </div>
    }
</root>

@code
{
    public Inventory Inventory { get; set; }
    bool IsVisible => (Inventory?.timeSinceLastHover ?? 10) < 3f;

    protected override int BuildHash() => System.HashCode.Combine(IsVisible, Inventory?.HoveredIndex);
}